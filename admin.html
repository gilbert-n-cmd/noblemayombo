<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <style>
    </style>
</head>
<body>

  <header>
    <div class="top-bar">
      <div class="logo" style="color: white; font-size: 24px; font-weight: bold;">Noble Mayombo Memorial seed School</div>
      <div id="chat-container">
       
        <div class="time">
          <b>Current Time: <span id="liveTime"></span></b>
          <b>Current Date: <span id="liveDate"></span></b>
        </div>
        <!---<button class="chat-btn" onclick="toggleChat()">💬 Chat with Us</button>--->
       <div id="chat-box">
        <!---<div class="chat-header">
          <span>Live Chat</span>
          <button onclick="toggleChat()">✖</button>
        </div>--->
        <!---<div class="chat-body">
          <p>Welcome to Noble Mayombo Memorial seed School! How can we help you?</p>
          <input type="text" placeholder="Type your message..." /><br /><br />
          <button onclick="toggleChat()">send</button>
        </div>--->
      </div>
    </div>
      <div>+256 779905605 | noble@gmail.ac.ug</div>
      <div class="right-section">
        <div class="socials-icons img">
          <a href="#footer-icons"><i class="fas fa-globe"></i></a>
          <a href="#footer-icons"><i class="fab fa-instagram"></i></a>
          <a href="#footer-icons"><i class="fab fa-facebook-f"></i></a>
          <a href="#footer-icons"><i class="fab fa-whatsapp"></i></a>
        </div>
        <select class="language-selector">
          <option value="en">English</option>
          <option value="fr">French</option>
          <option value="es">Spanish</option>
        </select>
      </div>
    </div>
  </header>

  <nav>
    <button class="nav-toggle" aria-label="Toggle navigation">
      <span class="hamburger"></span>
    </button>
    <a href="index.html">Home</a>
    <div class="dropdown">
      <a href="#">Academics &#x25BC;</a>
    <div class="dropdown-content">
        <a href="o-level.html">O Level</a>
        <a href="a-level.html">A Level</a>
    </div>
    </div>
    <div class="dropdown">
      <a href="#">About &#x25BC;</a>
      <div class="dropdown-content">
        <a href="About-Brigadier-Noble-Mayobo.html">About Brigadier Noble Mayobo</a>
        <a href="Staff.html">Staff</a>
        <a href="student-life.html">Student-life</a>
        <a href="history.html">School history</a>
        <a href="Academic-performance.html">Academic performance</a>
        
        <a href="gallery.html">Gallery</a>
        <a href="Board-of-Governors.html">Board of Governors</a>
        <a href="PTA-executives.html">PTA executives</a>
        <div class="dropdown-submenu">
          <a href="#">Clubs & Facilities</a>
            <div class="dropdown-submenu-content">
              <a href="Catholic.html">Catholic</a>
              <a href="Scripture-Union.html">Scripture union</a>
              <a href="muslim-comunity.html">Muslim community</a>
              <a href="MDD.html">MDD</a>
              <a href="Debating-Club.html">Debating Club</a>
              
            </div>
          </div>
        
      </div>
    </div>
    <a href="news-updates.html">News & updates</a>
    <a href="calendar-event.html">Calendar & event</a>
    <a href="https://forms.gle/QkhdYqyWvCrTrn8Q9">Contact</a>
    <div class="dropdown">
    <a href="#">Apply Online &#x25BC;</a>
    <div class="dropdown-content">
        <a href="https://forms.gle/ETV3e5VFoF3JrhD86">O Level</a>
        <a href="a-level.html">A Level</a>
    </div>
    </div>
    <button class="search-toggle" aria-label="Toggle search">
      <i class="fas fa-search"></i>
    </button>
  </nav>
  <!---<div id="splash-screen" class="splash">
        <img src="images/loading.gif" alt="About Us Introduction">
       
    </div>--->
 <div class="search-bar" style="display:none;">
    <!---<form action="search_results.php" method="GET" style="display:flex; gap:5px;">
      <input type="text" name="q" placeholder="Search..." required />
      <button type="submit">Search</button>
    </form>--->
    <script async src="https://cse.google.com/cse.js?cx=b374e5ea123af4b1b">
    </script>
<div class="gcse-search"></div>    
  </div>
  <button id="backToTopBtn" onclick="scrollToTop()">↑</button>
  <!--<div class="brightness-controls">
    <button onclick="setBrightness('low')">Low</button>
    <button onclick="setBrightness('medium')">Medium</button>
    <button onclick="setBrightness('high')">High</button>
  </div>--->
  <main style="max-width: 600px; margin: 40px auto; padding: 20px; background-color: #4d749b; border-radius: 8px; color: white;">
    <div id="login-container">
      <h1>Admin Login</h1>
      <form id="login-form">
        <label for="email">Username:</label><br>
        <input type="text" id="username" name="username" required style="width: 100%; padding: 8px; margin-bottom: 15px; border-radius: 4px; border: none;"><br>
        <label for="password">Password:</label><br>
        <input type="password" id="password" name="password" required style="width: 100%; padding: 8px; margin-bottom: 15px; border-radius: 4px; border: none;"><br>
        <button type="submit" style="background-color: white; color: #4d749b; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer;">Login</button>
      </form>
      <div style="margin-top: 10px;">
        <button id="register-btn" style="background-color: transparent; color: white; border: none; cursor: pointer; margin-right: 10px;">Register</button>
        <button id="forgot-btn" style="background-color: transparent; color: white; border: none; cursor: pointer;">Forgot Password</button>
      </div>
    </div>

    <div id="register-container" style="display:none; margin-top: 20px; color: white;">
      <h1>Register</h1>
      <form id="register-form" action="register_handler.php" method="POST">
        <label for="reg-email">Email:</label><br>
        <input type="email" id="reg-email" name="email" required style="width: 100%; padding: 8px; margin-bottom: 15px; border-radius: 4px; border: none;"><br>
        <label for="reg-username">Username:</label><br>
        <input type="text" id="reg-username" name="username" required style="width: 100%; padding: 8px; margin-bottom: 15px; border-radius: 4px; border: none;"><br>
        <label for="reg-password">Set Password:</label><br>
        <input type="password" id="reg-password" name="password" required style="width: 100%; padding: 8px; margin-bottom: 15px; border-radius: 4px; border: none;"><br>
        <button type="submit" style="background-color: white; color: #4d749b; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer;">Submit</button>
        <button type="button" id="cancel-register" style="background-color: transparent; color: white; border: none; cursor: pointer; margin-left: 10px;">Cancel</button>
      </form>
    </div>
    <div id="admin-form-container" style="display:none;">
      <h1>Admin Information Entry</h1>
      <form action="admin_handler.php" method="POST">
        <label for="title">Title:</label><br>
        <input type="text" id="title" name="title" required style="width: 100%; padding: 8px; margin-bottom: 15px; border-radius: 4px; border: none;"><br>
        <label for="description">Description:</label><br>
        <textarea id="description" name="description" rows="5" required style="width: 100%; padding: 8px; margin-bottom: 15px; border-radius: 4px; border: none;"></textarea><br>
        <button type="submit" style="background-color: white; color: #4d749b; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer;">Add Information</button>
      </form>
    </div>
  </main>

  <footer class="footer">
    <div class="footer-column">
      <h3>Quick Links</h3>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="#">Programs</a></li>
        <li><a href="history.html">About</a></li>
        <li><a href="https://forms.gle/QkhdYqyWvCrTrn8Q9">Contact</a></li>
        <div class="dropdown">
    <a href="#">Apply Online &#x25BC;</a>
    <div class="dropdown-content">
        <a href="https://forms.gle/ETV3e5VFoF3JrhD86">O Level</a>
        <a href="a-level.html">A Level</a>
    </div>
    </div>
      </ul>
    </div>
    <div class="footer-column">
      <h3>Contact Us</h3>
      <p>Location: P.O.Box 112,Arua</p>
      <p>Phone: +256-779-905-605</p>
      <p>Email: noble@gmail.ac.ug</p>
    </div>
    <div class="footer-column">
      <h3>Opening Hours</h3>
      <p>Mon - Fri: 8:00 AM - 6:00 PM</p>
      <p>Sat: 9:00 AM - 4:00 PM</p>
      <p>Sun: Closed</p>
    </div>
    <div class="footer-bottom">
            <marquee><p>&copy; 2025 NOble Mayombo Memorial Seed Secondary School. All rights reserved.<br>Designed by:<br> ATUMA GILBERT <br>www.gilbertatuma700@gmail.com<br> 0779905605 </p></marquee>


    </div>
  </footer>
  <script src="script.js"></script>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-app.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, sendPasswordResetEmail, signOut } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-auth.js";
    import { getFirestore, collection, query, where, getDocs, setDoc, doc } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-firestore.js";

    // 🔹 Your Firebase config (replace with your own from Firebase Console)
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT.firebaseapp.com",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_PROJECT.appspot.com",
      messagingSenderId: "SENDER_ID",
      appId: "APP_ID"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    // Switch Views
    document.getElementById('goto-register').onclick = () => {
      document.getElementById('login-container').style.display = 'none';
      document.getElementById('register-container').style.display = 'block';
    };
    document.getElementById('goto-login').onclick = () => {
      document.getElementById('register-container').style.display = 'none';
      document.getElementById('login-container').style.display = 'block';
    };

    // Register
    const registerForm = document.getElementById('register-form');
    registerForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      const email = document.getElementById('reg-email').value.trim();
      const username = document.getElementById('reg-username').value.trim();
      const password = document.getElementById('reg-password').value;
      try {
        // check duplicate username
        const q = query(collection(db, "users"), where("username", "==", username));
        const snap = await getDocs(q);
        if (!snap.empty) {
          alert("❌ Username already taken.");
        } else {
          const userCred = await createUserWithEmailAndPassword(auth, email, password);
          await setDoc(doc(db, "users", userCred.user.uid), { email, username });
          alert("✅ Registered!");
          document.getElementById('register-container').style.display = 'none';
          document.getElementById('login-container').style.display = 'block';
        }
      } catch (err) {
        alert("❌ Error: " + err.message);
      } finally {
        registerForm.reset(); // 🔹 clears always
      }
    });

    // Login
    const loginForm = document.getElementById('login-form');
    loginForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      let loginInput = document.getElementById('username').value.trim();
      const password = document.getElementById('password').value;
      try {
        let email = loginInput;
        if (!loginInput.includes("@")) {
          const q = query(collection(db, "users"), where("username", "==", loginInput));
          const snap = await getDocs(q);
          if (snap.empty) {
            alert("❌ Username not found");
            return;
          }
          email = snap.docs[0].data().email;
        }
        await signInWithEmailAndPassword(auth, email, password);
        alert("✅ Logged in!");
        document.getElementById('login-container').style.display = 'none';
        document.getElementById('admin-form-container').style.display = 'block';
      } catch (err) {
        alert("❌ Login failed: " + err.message);
      } finally {
        loginForm.reset(); // 🔹 clears always
      }
    });

    // Forgot Password
    document.getElementById('forgot-btn').addEventListener('click', async () => {
      const email = prompt("Enter your email to reset password:");
      if (email) {
        try {
          await sendPasswordResetEmail(auth, email);
          alert("📧 Password reset email sent!");
        } catch (err) {
          alert("❌ Error: " + err.message);
        }
      }
    });

    // Logout
    document.getElementById('logout-btn').onclick = async () => {
      await signOut(auth);
      document.getElementById('admin-form-container').style.display = 'none';
      document.getElementById('login-container').style.display = 'block';
    };
</script>

</body>
</html>




